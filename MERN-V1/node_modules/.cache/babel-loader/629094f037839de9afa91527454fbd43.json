{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar utils_1 = require(\"../utils/index\");\n/**\n * 事件机制，类似 NodeJS Events 模块\n * 使用文档参考 https://taro-docs.jd.com/taro/docs/apis/about/events/\n */\n\n\nvar Events =\n/** @class */\nfunction () {\n  function Events() {\n    this.listenerMap = {};\n  }\n  /**\n   * 绑定事件\n   * @param eventName 事件名称\n   * @param listeners 监听函数\n   */\n\n\n  Events.prototype.on = function (eventName) {\n    var listeners = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      listeners[_i - 1] = arguments[_i];\n    }\n\n    if (!this.listenerMap[eventName]) {\n      this.listenerMap[eventName] = [];\n    }\n\n    for (var _a = 0, listeners_1 = listeners; _a < listeners_1.length; _a++) {\n      var listener = listeners_1[_a];\n\n      if (utils_1.isFunction(listener)) {\n        this.listenerMap[eventName].push(listener);\n      }\n    }\n\n    return this;\n  };\n  /**\n   * 取消事件\n   * @param eventName 事件名称\n   * @param listener 监听函数\n   */\n\n\n  Events.prototype.off = function (eventName, listener) {\n    if (!eventName) {\n      // 移除所有事件\n      this.listenerMap = {};\n      return this;\n    }\n\n    if (!listener) {\n      // 移除事件名称所有事件\n      this.listenerMap[eventName] = [];\n      return this;\n    } // 移除事件名称特定事件\n\n\n    var container = this.listenerMap[eventName];\n    var index = container.indexOf(listener);\n\n    if (index !== -1) {\n      container.splice(index, 1);\n    }\n\n    return this;\n  };\n  /**\n   * 触发事件\n   * @param eventName 事件名称\n   * @param args 参数\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  Events.prototype.trigger = function (eventName) {\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    var listeners = this.listenerMap[eventName];\n\n    if (Array.isArray(listeners)) {\n      listeners.forEach(function (listener) {\n        listener.apply(void 0, args);\n      });\n    }\n\n    return this;\n  };\n\n  return Events;\n}();\n\nexports.default = Events;","map":{"version":3,"names":["Object","defineProperty","exports","value","utils_1","require","Events","listenerMap","prototype","on","eventName","listeners","_i","arguments","length","_a","listeners_1","listener","isFunction","push","off","container","index","indexOf","splice","trigger","args","Array","isArray","forEach","apply","default"],"sources":["/Users/roy/Desktop/drajm-site/node_modules/jparticles/lib/common/events.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"../utils/index\");\n/**\n * 事件机制，类似 NodeJS Events 模块\n * 使用文档参考 https://taro-docs.jd.com/taro/docs/apis/about/events/\n */\nvar Events = /** @class */ (function () {\n    function Events() {\n        this.listenerMap = {};\n    }\n    /**\n     * 绑定事件\n     * @param eventName 事件名称\n     * @param listeners 监听函数\n     */\n    Events.prototype.on = function (eventName) {\n        var listeners = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            listeners[_i - 1] = arguments[_i];\n        }\n        if (!this.listenerMap[eventName]) {\n            this.listenerMap[eventName] = [];\n        }\n        for (var _a = 0, listeners_1 = listeners; _a < listeners_1.length; _a++) {\n            var listener = listeners_1[_a];\n            if (utils_1.isFunction(listener)) {\n                this.listenerMap[eventName].push(listener);\n            }\n        }\n        return this;\n    };\n    /**\n     * 取消事件\n     * @param eventName 事件名称\n     * @param listener 监听函数\n     */\n    Events.prototype.off = function (eventName, listener) {\n        if (!eventName) {\n            // 移除所有事件\n            this.listenerMap = {};\n            return this;\n        }\n        if (!listener) {\n            // 移除事件名称所有事件\n            this.listenerMap[eventName] = [];\n            return this;\n        }\n        // 移除事件名称特定事件\n        var container = this.listenerMap[eventName];\n        var index = container.indexOf(listener);\n        if (index !== -1) {\n            container.splice(index, 1);\n        }\n        return this;\n    };\n    /**\n     * 触发事件\n     * @param eventName 事件名称\n     * @param args 参数\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Events.prototype.trigger = function (eventName) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var listeners = this.listenerMap[eventName];\n        if (Array.isArray(listeners)) {\n            listeners.forEach(function (listener) {\n                listener.apply(void 0, args);\n            });\n        }\n        return this;\n    };\n    return Events;\n}());\nexports.default = Events;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}